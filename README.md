# 21é»ï¼šåšå¼ˆç´›çˆ­

å¤šäººç·šä¸Š 21 é»å°æˆ°éŠæˆ²ï¼Œæ”¯æ´ PVE å–®äººç·´ç¿’èˆ‡ PVP å¤šäººäº‚é¬¥æ¨¡å¼ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ® **PVE å–®äººç·´ç¿’** - èˆ‡é›»è…¦å°æˆ°ç·´ç¿’æŠ€å·§
- ğŸ‘¥ **PVP å¤šäººå°æˆ°** - æœ€å¤š 5 äººåŒæˆ¿å°æˆ°
- ğŸ’¬ **å³æ™‚èŠå¤©** - éŠæˆ²ä¸­èˆ‡å…¶ä»–ç©å®¶äº¤æµ
- â¤ï¸ **ç”Ÿå­˜æ©Ÿåˆ¶** - 15 HP è¡€é‡ç³»çµ±ï¼Œè¼¸ç‰Œæ‰£è¡€ï¼Œæ­¸é›¶æ·˜æ±°
- âš–ï¸ **èŠå®¶è¼ªæ›¿** - æ¯å±€çµæŸå¾ŒèŠå®¶è‡ªå‹•è¼ªæ›
- ğŸ¯ **æ¶ˆæ¥µæ‡²ç½°** - èŠå®¶ä¸æ‹¿ç‰Œä¸”æœªç²å‹å°‡è¢«æ‰£è¡€
- ğŸƒ **æ©Ÿæœƒå¡ç³»çµ±** - åŠŸèƒ½ç‰Œç‚ºå°å±€å¢æ·»ç­–ç•¥è®ŠåŒ–

## éŠæˆ²è¦å‰‡

### PVP éŠæˆ²æµç¨‹

PVP æ¨¡å¼ä½¿ç”¨ **å ´ (Game)** èˆ‡ **å›åˆ (Round)** é›™å±¤çµæ§‹ï¼š

| å±¤ç´š | å®šç¾© |
|------|------|
| **ä¸€å ´éŠæˆ²** | æˆ¿ä¸»é¦–æ¬¡æŒ‰ã€Œé–‹å§‹ã€ â†’ åªå‰©ä¸€åç©å®¶ HP > 0 |
| **ä¸€å›åˆ** | ç™¼ç‰Œ â†’ æ©Ÿæœƒå¡éšæ®µ â†’ ç©å®¶è¡Œå‹• â†’ çµç®— |

å‹åˆ©å¾Œæ‰€æœ‰ç©å®¶ HP é‡ç½®ç‚º 15ï¼Œé–‹å§‹æ–°ä¸€å ´éŠæˆ²ã€‚

### è¡€é‡æ©Ÿåˆ¶

| æƒ…æ³ | HP è®ŠåŒ– |
|------|---------| 
| é–’å®¶çˆ†ç‰Œæˆ–è¼¸çµ¦èŠå®¶ | -1 HP |
| èŠå®¶çˆ†ç‰Œ | -2 HP |
| èŠå®¶æ¶ˆæ¥µé¿æˆ°ä¸”æœªç²å‹ | -1 HP |
| HP æ­¸é›¶ | è®Šç‚ºæ—è§€è€…ï¼ˆéæ·˜æ±°å‡ºå±€ï¼‰ |

### æ©Ÿæœƒå¡ï¼ˆåŠŸèƒ½ç‰Œï¼‰

- ç¬¬ä¸€**å ´**éŠæˆ²é–‹å§‹æ™‚ï¼Œæ¯ä½ç©å®¶ç™¼æ”¾ **3 å¼µæ©Ÿæœƒå¡**
- åªèƒ½åœ¨**æ©Ÿæœƒå¡éšæ®µ**ä½¿ç”¨ï¼ˆç™¼ç‰Œå¾Œã€ç©å®¶è¡Œå‹•å‰ï¼‰
- PVE æ¨¡å¼ä¸ç™¼æ”¾æ©Ÿæœƒå¡

| å¡ç‰‡åç¨± | æ•ˆæœ |
|----------|------|
| åšå€‹äº¤æ˜“ | èˆ‡ä¸€ä½ç©å®¶äº’æ›æ‰‹ç‰Œ |

## å¿«é€Ÿé–‹å§‹

### ç·¨è­¯

```bash
# Server
cd BlackjackServer
javac -encoding UTF-8 -d out -sourcepath src src/Main.java src/server/*.java src/game/*.java src/model/*.java src/protocol/*.java src/command/*.java

# Client
cd BlackjackClient
javac -encoding UTF-8 -d out -sourcepath src src/Main.java src/client/*.java src/handler/*.java src/ui/*.java src/protocol/*.java src/command/*.java
```

### åŸ·è¡Œ

```bash
# å•Ÿå‹•ä¼ºæœå™¨
cd BlackjackServer
java -cp out Main

# å•Ÿå‹•å®¢æˆ¶ç«¯ (å¯é–‹å•Ÿå¤šå€‹)
cd BlackjackClient
java -cp out Main
```

### é€£ç·š

1. å•Ÿå‹• Server
2. é–‹å•Ÿ Client
3. è¼¸å…¥ä¼ºæœå™¨ IPï¼ˆæœ¬æ©Ÿæ¸¬è©¦ç”¨ `127.0.0.1`ï¼‰
4. è¼¸å…¥æš±ç¨±
5. é¸æ“‡ PVE æˆ–å‰µå»º/åŠ å…¥ PVP æˆ¿é–“

## å°ˆæ¡ˆçµæ§‹

```
im-java/
â”œâ”€â”€ BlackjackServer/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ Main.java           # é€²å…¥é»
â”‚       â”œâ”€â”€ server/             # ç¶²è·¯å±¤
â”‚       â”œâ”€â”€ game/               # éŠæˆ²é‚è¼¯
â”‚       â”œâ”€â”€ model/              # è³‡æ–™æ¨¡å‹ (Card, Deck, Hand)
â”‚       â”œâ”€â”€ protocol/           # é€šè¨Šå”å®š
â”‚       â””â”€â”€ command/            # å‘½ä»¤æ¨¡å¼ (Command Pattern)
â”‚
â”œâ”€â”€ BlackjackClient/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ Main.java           # é€²å…¥é»
â”‚       â”œâ”€â”€ client/             # ä¸»è¦–çª—èˆ‡ç¶²è·¯
â”‚       â”œâ”€â”€ handler/            # è¨Šæ¯è™•ç†
â”‚       â”œâ”€â”€ ui/                 # UI å…ƒä»¶
â”‚       â”œâ”€â”€ protocol/           # é€šè¨Šå”å®š
â”‚       â””â”€â”€ command/            # å‘½ä»¤æ¨¡å¼ (Command Pattern)
â”‚
â”œâ”€â”€ README.md
â”œâ”€â”€ AGENTS.md
â””â”€â”€ .gitignore
```

## æŠ€è¡“ç´°ç¯€

- **èªè¨€**: Java
- **ç¶²è·¯**: Socket (TCP)
- **UI**: Swing
- **é è¨­ Port**: 12345
- **è¨­è¨ˆæ¨¡å¼**: Command Pattern

## è¨­è¨ˆæ¨¡å¼

### Command Patternï¼ˆå‘½ä»¤æ¨¡å¼ï¼‰

å°ˆæ¡ˆæ¡ç”¨å‘½ä»¤æ¨¡å¼è™•ç†å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ä¹‹é–“çš„é€šè¨Šï¼Œå°‡æ¯å€‹æ“ä½œå°è£ç‚ºç¨ç«‹çš„å‘½ä»¤ç‰©ä»¶ï¼š

**ä¼ºæœå™¨ç«¯**ï¼š
- `Command` ä»‹é¢å®šç¾©å‘½ä»¤å¥‘ç´„
- `CommandContext` å°è£åŸ·è¡Œä¸Šä¸‹æ–‡
- `CommandRegistry` ç®¡ç†å‘½ä»¤è¨»å†Šèˆ‡æŸ¥æ‰¾
- å„å‘½ä»¤é¡åˆ¥ï¼š`LoginCommand`ã€`HitCommand`ã€`StandCommand` ç­‰

**å®¢æˆ¶ç«¯**ï¼š
- `ServerMessageHandler` ä»‹é¢å®šç¾©è¨Šæ¯è™•ç†å¥‘ç´„
- `MessageContext` å°è£è™•ç†ä¸Šä¸‹æ–‡
- `MessageHandlerRegistry` ç®¡ç†è™•ç†å™¨è¨»å†Šèˆ‡æŸ¥æ‰¾
- å„è™•ç†å™¨é¡åˆ¥ï¼š`LoginOkHandler`ã€`GameOverHandler` ç­‰

**å„ªé»**ï¼š
- å–®ä¸€è·è²¬ï¼šæ¯å€‹å‘½ä»¤/è™•ç†å™¨åªè² è²¬ä¸€ç¨®æ“ä½œ
- é–‹æ”¾å°é–‰ï¼šæ–°å¢å‘½ä»¤ç„¡éœ€ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼
- å¯æ¸¬è©¦æ€§ï¼šå‘½ä»¤å¯ç¨ç«‹é€²è¡Œå–®å…ƒæ¸¬è©¦

## License

MIT
